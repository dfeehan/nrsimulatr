<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Network reporting simulation package - design document • nrsimulatr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Network reporting simulation package - design document">
<meta property="og:description" content="nrsimulatr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-MNBH4QHVYP"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MNBH4QHVYP');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nrsimulatr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2.901</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/dfeehan/nrsimulatr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="design_doc_files/header-attrs-2.3/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Network reporting simulation package - design document</h1>
                        <h4 class="author">Dennis Feehan</h4>
            
            <h4 class="date">2020-11-01</h4>
      
      <small class="dont-index">Source: <a href="http://github.com/dfeehan/nrsimulatr/blob/master/vignettes/design_doc.Rmd"><code>vignettes/design_doc.Rmd</code></a></small>
      <div class="hidden name"><code>design_doc.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="co"># don't include this vignette in pkgdown site</span>
<span class="co"># see https://github.com/r-lib/pkgdown/issues/457</span>
<span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>eval <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></pre></div>
<p>This document describes the design of <code>nrsimulatr</code>, a package to help researchers experiment with network reporting methods through simulations.</p>
<p>Conducting a network reporting simulation can be broken down into several steps:</p>
<ul>
<li>generating a social network (or opening an existing social network)</li>
<li>generating a reporting network from the social network</li>
<li>sampling respondents</li>
<li>computing estimates</li>
</ul>
<p>The sections in this document roughly correspond to those steps.</p>
<div id="generating-a-social-network" class="section level2">
<h2 class="hasAnchor">
<a href="#generating-a-social-network" class="anchor"></a>Generating a social network</h2>
<p>In network reporting, the social network is the undirected network that respondents are asked to report about.</p>
<p>Currently, there is only one broad way to generate a social network in the package: using a stochastic block model. However, this part of the code is designed to be expanded in the future in two ways: first, it should be easy for future researchers to add different probabilistic network models; and, second, it should be possible to use real-world network datasets.</p>
<div id="data-model" class="section level3">
<h3 class="hasAnchor">
<a href="#data-model" class="anchor"></a>Data model</h3>
<p>Whether stochastically generating a network or reading one in from a dataset, the result should be an <code>igraph</code> object whose vertices have (at least) the following attributes:</p>
<ul>
<li>
<code>in.H</code> - 0/1 indicator for membership in H</li>
<li>
<code>in.F</code> - 0/1 indicator for membership in F</li>
<li>
<code>d.degree</code> - the node’s degree</li>
</ul>
</div>
<div id="methods" class="section level3">
<h3 class="hasAnchor">
<a href="#methods" class="anchor"></a>Methods</h3>
<ul>
<li>
<code>generate_graph</code> (generic)</li>
</ul>
</div>
<div id="stochastic-block-model" class="section level3">
<h3 class="hasAnchor">
<a href="#stochastic-block-model" class="anchor"></a>Stochastic block model</h3>
<p>So far, the only stochastic model for generating social networks that has been written is based on the stochastic block model. There are three versions: <code>4group_1param_simple</code>, <code>4group_1param_nested</code>, and <code>4group_2param</code>.</p>
<p>TODO - FILL IN DETAILS</p>
<p>To create a social network using the stochastic block model, call the method <code>sbm_params</code>. This method takes a list of parameters and constructs an S3 class representing the simuluation. The resulting parameter object can be passed to <code>generate_graph</code>.</p>
<p>TODO - example code?</p>
</div>
<div id="creating-new-models" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-new-models" class="anchor"></a>Creating new models</h3>
<p>TODO</p>
</div>
</div>
<div id="generating-a-reporting-network-from-the-social-network" class="section level2">
<h2 class="hasAnchor">
<a href="#generating-a-reporting-network-from-the-social-network" class="anchor"></a>Generating a reporting network from the social network</h2>
<p>In network reporting, the reporting network is the directed network of respondents’ reports about their network connections. When reporting is accurate, this network is similar to the social network, but if reporting is inaccurate, then it can be quite different.</p>
<p><code>nrsimulatr</code> treats the social and the reporting networks as entirely separate. Once the social network has been created, generating a reporting network is a distinct process.</p>
<p>If you create a new model for generating social networks, and you want reporting to vary as part of your model, you will have to create a set of methods that turn your social network into a reporting graph.</p>
<p>The package currently implements only the basic form of imperfect reporting, which makes use of the fact that the vertices of the social network graph have labels <code>in.F</code> and <code>in.H</code> indicating whether or not each vetex is in the frame population and in the hidden population. This basic form of imperfect reporting is governed by two parameters, <span class="math inline">\(\tau_F\)</span> and <span class="math inline">\(\eta_F\)</span>.</p>
<div id="data-model-1" class="section level3">
<h3 class="hasAnchor">
<a href="#data-model-1" class="anchor"></a>Data model</h3>
<p>A reporting network object is a directed <code>igraph</code> object whose vertices have (at least) the following attributes:</p>
<ul>
<li>
<code>in.H</code> - 0/1 indicator for membership in H</li>
<li>
<code>in.F</code> - 0/1 indicator for membership in F</li>
<li>
<code>y.H</code> - number of out-reports about connections to H</li>
<li>
<code>v.F</code> - visibility to people in F</li>
</ul>
</div>
<div id="methods-1" class="section level3">
<h3 class="hasAnchor">
<a href="#methods-1" class="anchor"></a>Methods</h3>
<ul>
<li>
<code>reporting_graph</code> (generic)</li>
<li>TODO - more?</li>
</ul>
</div>
</div>
<div id="sampling-respondents-and-computing-estimates" class="section level2">
<h2 class="hasAnchor">
<a href="#sampling-respondents-and-computing-estimates" class="anchor"></a>Sampling respondents and computing estimates</h2>
<p>Sampling respondents mimics the process of sampling a real population.</p>
<p><code>nrsimulatr</code> currently implements three types of sampling:</p>
<ul>
<li>taking a census</li>
<li>simple random sampling from F</li>
<li>relative probability sampling from H</li>
</ul>
<p>Sampling produces a dataset of the attributes of the sampled nodes, along with a variable called <code>sampling_weight</code>, which has the weights for the sample.</p>
</div>
<div id="computing-estimates" class="section level2">
<h2 class="hasAnchor">
<a href="#computing-estimates" class="anchor"></a>Computing estimates</h2>
<p>Researchers may be interested in computing lots of different kinds of estimates using network reporting methods.</p>
<p><code>nrsimulatr</code> assumes that computing estimates only requires datasets produced from sampling respondents, and not any other information about the network.</p>
<p>Right now, the package only has one simple function used to compute estimates related to the stochastic block model; it is called <code>sbm_estimates</code>.</p>
<p>Researchers can add other functions for computing estimates from stochastic block models, or from models they write themselves.</p>
<p>TODO - recommend that estimator functions take a dataset and info about weights</p>
</div>
<div id="example-of-creating-new-model" class="section level2">
<h2 class="hasAnchor">
<a href="#example-of-creating-new-model" class="anchor"></a>Example of creating new model</h2>
<p>TODO - good example might be something like ER random graph with everyone in F and a random 10% of people in H</p>
<ul>
<li>estimates function (maybe)</li>
<li>
<code>report_edges</code> function for new model</li>
<li>constructor fn for params (probably)</li>
<li>
<code>generate_graph</code> given a set of params function for new model</li>
</ul>
<p>if your model is partially to test new reporting assumptions, you might also want to add</p>
<ul>
<li>constructor fn for new reporting params</li>
<li>
<code>reporting_graph</code> function</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span>
<span class="va">opts_chunk</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>eval<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Dennis Feehan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
